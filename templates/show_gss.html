{% extends "base.html" %}
{% block content %}

	<!-- BODY -->

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<div class="col-md-10">

    <div id="map" style="height: 440px; border: 1px solid #AAA; width: 640px"></div>
    <script language="javascript">
      document.write();
      var map = L.map( 'map', {
          center: [44.495, 11.34],
          minZoom: 2,
          zoom: 14
      });
      L.tileLayer( 'http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="http://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="http://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
          subdomains: ['otile1','otile2','otile3','otile4']
      }).addTo( map );

      {% for gs in gss %}
      L.marker( [{{ gs["gs_lat"]}}, {{gs["gs_long"]}} ]).bindPopup("<a href='{{ url_for('gss_show', gsid = gs["gs_id"]) }}'>{{ gs["gs_name"] }}<a>").addTo( map );
      {% endfor %}

// https://asmaloney.com/2014/01/code/creating-an-interactive-map-with-leaflet-and-openstreetmap/
    </script>


    <table class="table table-striped table-hover">
      
      <!-- Table Heading -->
      <thead>
      <tr>
	<th>Name</th>
	<th>ID</th>
	<th>Latitude</th>
	<th>Longitude</th>
	<th>Actions</th>
      </tr>
      </thead>

      <tbody>
      {% for gs in gss %}
      <tr>
	<td><a href="{{ url_for('gss_show', gsid=gs['gs_id']) }}">{{ gs["gs_name"] }}</a></td>
	<td><a href="{{ url_for('gss_show', gsid=gs['gs_id']) }}">{{ gs["gs_id"] }}</a></td>
	<td><a href="{{ url_for('gss_show', gsid=gs['gs_id']) }}">{{ gs["gs_lat"] }}</a></td>
	<td><a href="{{ url_for('gss_show', gsid=gs['gs_id']) }}">{{ gs["gs_long"] }}</a></td>

	<td>
	  <a href="{{ url_for('gss_show', gsid=gs['gs_id']) }}"><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> Details</a>&nbsp;
	  <a href="{{ url_for('gss_edit', gsid=gs['gs_id']) }}"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit</a>&nbsp;
	  <a href="{{ url_for('gss_delete', gsid=gs['gs_id']) }}" method><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Delete</a>
	</td>
      </tr>
	{% endfor %}
      </tbody>

    </table>

	  <hr>
	  <div class="row-fluid">
	    <a href="{{ url_for('vehicles_new') }}"><span class="glyphicon glyphicon-flash" aria-hidden="true"></span>&nbsp; New GroundStation</a>
	  </div>

	</div>
      </div>

{% endblock %}
